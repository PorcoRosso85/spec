# リポジトリ構成 / structure

## 目的
このドキュメントはリポジトリのディレクトリ構成とそれぞれの責務を1か所にまとめたものです。
このファイル (docs/structure/index.md) が唯一の正 (SSOT: Single Source of Truth) です。
新しいディレクトリや役割の変更が発生したら、必ずここを更新してください。

## ディレクトリの責務
- docs/
  - 開発者向けドキュメント全般。
  - 設計の意思決定 (ADR)、運用手順 (ops)、構成の説明 (structure) を含む。
- docs/structure/
  - 今見ているこのファイル群。リポジトリ全体の形と責務の説明。
  - 「このコードはどこに置くべき？」に答える場所。
- docs/ops/
  - 運用 Runbook。日々の変更手順・秘密情報の扱い・壊してはいけないものの守り方。
  - 手を動かす人のためのHOW TO。
- docs/adr/
  - Architecture Decision Record (ADR)。なぜ今の形になっているかの履歴。
  - 過去の経緯はここを見る。最新の意図は docs/structure/index.md を見る。
- (アプリ固有のディレクトリ)
  - 例: api/ や frontend/ や infra/ など。
  - それぞれの中には:
    - 最小限のREADME (目的 / 公開インターフェース / 触るときの注意) を置く。
    - 詳細な運用手順は docs/ops/ に置く。

## 配置と命名の基本ルール
1. 同じことが複数の場所に重複して書かれないようにする (DRY)。
2. 触る人が迷わないようシンプルにする (KISS)。
3. 今必要なものだけを書く。将来の仮説は書かない (YAGNI)。
4. 1ファイル1責務。混ざりそうになったら分割する (SRP)。
5. 例外や特別扱いが多くなったら docs/adr/ に理由を書く (SOLIDの"O"の観点: 変更に強い形にする)。

## この先どう更新するか
- 新しいディレクトリを追加したら:
  - その目的をここに1〜3行で追記する。
  - 迷いや議論があったなら docs/adr/ に記録してリンクする。
- 既存ディレクトリの意味が変わったら:
  - まずここを直す。READMEはその後で直す。

## 関連
- 運用フロー・手順書は ../ops/index.md を参照。
- 過去の意思決定は ../adr/ 以下を参照。
